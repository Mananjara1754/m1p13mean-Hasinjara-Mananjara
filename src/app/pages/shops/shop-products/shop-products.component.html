<div class="page-header">
    <div class="header-left">
        <button class="back-btn" routerLink="/shops">← Back</button>
        <div class="title-group">
            <h1>Products</h1>
            <span class="shop-name" *ngIf="shopName">{{ shopName }}</span>
        </div>
    </div>
    <button class="primary-btn" (click)="toggleForm()">
        {{ showForm ? 'Cancel' : '+ Add Product' }}
    </button>
</div>

<!-- Add Product Form -->
<div class="form-card glass" *ngIf="showForm">
    <h3>New Product</h3>
    <form (ngSubmit)="onSubmit()" #productForm="ngForm">
        <div class="form-grid">
            <div class="form-group">
                <label>Name</label>
                <div class="input-wrapper">
                    <input type="text" [(ngModel)]="newProduct.name" name="name" required placeholder="Product Name">
                </div>
            </div>
            <div class="form-group">
                <label>Category</label>
                <div class="input-wrapper">
                    <input type="text" [(ngModel)]="newProduct.category" name="category" required
                        placeholder="e.g. Fruits, Dairy">
                </div>
            </div>
            <div class="form-group">
                <label>Price</label>
                <div class="input-wrapper">
                    <input type="number" [(ngModel)]="newProduct.price" name="price" required min="0">
                </div>
            </div>
            <div class="form-group">
                <label>Stock</label>
                <div class="input-wrapper">
                    <input type="number" [(ngModel)]="newProduct.stockQuantity" name="stock" required min="0">
                </div>
            </div>
            <div class="form-group full-width">
                <label>Description</label>
                <div class="input-wrapper">
                    <textarea [(ngModel)]="newProduct.description" name="description" rows="2"></textarea>
                </div>
            </div>
        </div>
        <div class="form-actions">
            <button type="submit" class="primary-btn" [disabled]="!productForm.valid || isLoading">
                Save Product
            </button>
        </div>
    </form>
</div>

<!-- Product List -->
<div class="products-grid">
    <div class="product-card glass" *ngFor="let product of products">
        <div class="product-header">
            <h4>{{ product.name }}</h4>
            <span class="badge">{{ product.category }}</span>
        </div>
        <div class="product-stats">
            <div class="stat">
                <span class="label">Price</span>
                <span class="value">${{ product.price }}</span>
            </div>
            <div class="stat">
                <span class="label">Stock</span>
                <span class="value" [class.low]="product.stockQuantity < 10">{{ product.stockQuantity }}</span>
            </div>
        </div>
        <div class="product-actions">
            <button class="icon-btn edit">✏️</button>
            <!-- Would implement update logic here -->
        </div>
    </div>

    <div class="empty-state glass" *ngIf="products.length === 0">
        <p>No products yet. Add the first one!</p>
    </div>
</div>